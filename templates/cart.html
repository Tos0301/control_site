<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>カート</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="bg-light">

  <div class="container mt-5">
    <h1 class="text-center">カートの中身</h1>
    <table class="table table-bordered mt-4">
      <thead>
        <tr>
          <th>商品</th><th>数量</th><th>小計</th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart_items %}
        <tr>
          <td>
            <img src="{{ url_for('static', filename='images/' ~ item.image) }}" width="100">
            <div>{{ item.name }}</div>
          </td>
          <td>
            <form method="POST" action="{{ url_for('update_quantity') }}">
              <input type="hidden" name="product_id" value="{{ item.id }}">
              <input type="number" name="quantity" value="{{ item.quantity }}" min="0" onchange="this.form.submit()" class="form-control" style="width: 80px;">
            </form>
          </td>
          <td>¥{{ item.subtotal }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <p class="text-end fs-5 fw-bold">合計金額（税込）：¥{{ total }}</p>

    <div class="d-flex justify-content-between align-items-center mt-3">
      <form method="GET" action="{{ url_for('back_to_index') }}">
        <button type="submit" class="btn btn-outline-secondary">← 商品一覧へ戻る</button>
      </form>
      <form method="GET" action="{{ url_for('confirm') }}">
        <button type="submit" class="btn btn-primary">購入確認へ進む</button>
      </form>
    </div>
  </div>

</body>
</html>
